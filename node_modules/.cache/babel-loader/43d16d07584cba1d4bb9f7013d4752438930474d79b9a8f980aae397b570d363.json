{"ast":null,"code":"var _jsxFileName = \"/home/george/reactpro/events_manager/src/App.js\";\nimport { createBrowserRouter, RouterProvider, Route, Navigate } from 'react-router-dom';\nimport Home from './pages/Home';\nimport AddEvent from './pages/AddEvent';\nimport EditEvent from './pages/EditEvent';\nimport Layout from './Layout';\nimport NoPage from './pages/NoPage';\nimport Register from './pages/Register';\nimport Login from './pages/Login';\nimport MyAccount from './pages/MyAccount';\nimport MyEvents from './pages/MyEvents';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst handleLogin = async (username, password) => {\n  try {\n    const response = await fetch('http://localhost:5000/users');\n    const users = await response.json();\n    const user = users.find(u => u.username === username && u.password === password);\n    if (user) {\n      const token = `token-${user.id}`;\n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      localStorage.setItem('isAdmin', JSON.stringify(user.isAdmin));\n      return {\n        success: true,\n        user\n      };\n    } else {\n      return {\n        success: false,\n        error: 'Invalid username or password'\n      };\n    }\n  } catch (error) {\n    console.error('Login error:', error);\n    return {\n      success: false,\n      error: 'An error occurred during login'\n    };\n  }\n};\nconst ProtectedRoute = ({\n  children\n}) => {\n  const isLoggedIn = localStorage.getItem('token') !== null;\n  const isAdmin = JSON.parse(localStorage.getItem('isAdmin'));\n  if (!isLoggedIn) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n_c = ProtectedRoute;\nconst ProtectedAdminRoute = ({\n  children\n}) => {\n  const isAdmin = JSON.parse(localStorage.getItem('isAdmin'));\n  if (!isAdmin) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n_c2 = ProtectedAdminRoute;\nconst router = createBrowserRouter([{\n  path: '/',\n  element: /*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 14\n  }, this),\n  errorElement: /*#__PURE__*/_jsxDEV(NoPage, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 19\n  }, this),\n  children: [\n  // Public Routes\n  {\n    path: '/',\n    element: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 18\n    }, this)\n  }, {\n    path: '/register',\n    element: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 18\n    }, this)\n  }, {\n    path: '/login',\n    element: /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 18\n    }, this)\n  }, {\n    path: '/my-account',\n    element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n      children: /*#__PURE__*/_jsxDEV(MyAccount, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }, this)\n  }, {\n    path: '/admin/addevent',\n    element: /*#__PURE__*/_jsxDEV(ProtectedAdminRoute, {\n      children: /*#__PURE__*/_jsxDEV(AddEvent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }, this)\n  }, {\n    path: '/admin/edit-event/:id',\n    element: /*#__PURE__*/_jsxDEV(ProtectedAdminRoute, {\n      children: /*#__PURE__*/_jsxDEV(EditEvent, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }, this)\n  }, {\n    path: '/admin/my-events',\n    element: /*#__PURE__*/_jsxDEV(ProtectedAdminRoute, {\n      children: /*#__PURE__*/_jsxDEV(MyEvents, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }, this)\n  },\n  // 404 route\n  {\n    path: '*',\n    element: /*#__PURE__*/_jsxDEV(NoPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 18\n    }, this)\n  }]\n}]);\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(RouterProvider, {\n    router: router\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 10\n  }, this);\n}\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"ProtectedAdminRoute\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["createBrowserRouter","RouterProvider","Route","Navigate","Home","AddEvent","EditEvent","Layout","NoPage","Register","Login","MyAccount","MyEvents","jsxDEV","_jsxDEV","handleLogin","username","password","response","fetch","users","json","user","find","u","token","id","localStorage","setItem","JSON","stringify","isAdmin","success","error","console","ProtectedRoute","children","isLoggedIn","getItem","parse","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","_c","ProtectedAdminRoute","_c2","router","path","element","errorElement","onLogin","App","_c3","$RefreshReg$"],"sources":["/home/george/reactpro/events_manager/src/App.js"],"sourcesContent":["import { createBrowserRouter, RouterProvider, Route, Navigate } from 'react-router-dom';\nimport Home from './pages/Home';\nimport AddEvent from './pages/AddEvent';\nimport EditEvent from './pages/EditEvent';\nimport Layout from './Layout';\nimport NoPage from './pages/NoPage';\nimport Register from './pages/Register';\nimport Login from './pages/Login';\nimport MyAccount from './pages/MyAccount';\nimport MyEvents from './pages/MyEvents';\n\nconst handleLogin = async (username, password) => {\n  try {\n    const response = await fetch('http://localhost:5000/users');\n    const users = await response.json();\n\n    const user = users.find(u => u.username === username && u.password === password);\n\n    if (user) {\n      const token = `token-${user.id}`;\n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      localStorage.setItem('isAdmin', JSON.stringify(user.isAdmin));\n\n      return { success: true, user };\n    } else {\n      return { success: false, error: 'Invalid username or password' };\n    }\n  } catch (error) {\n    console.error('Login error:', error);\n    return { success: false, error: 'An error occurred during login' };\n  }\n};\n\nconst ProtectedRoute = ({ children }) => {\n  const isLoggedIn = localStorage.getItem('token') !== null;\n  const isAdmin = JSON.parse(localStorage.getItem('isAdmin'));\n\n  if (!isLoggedIn) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return children;\n};\n\nconst ProtectedAdminRoute = ({ children }) => {\n  const isAdmin = JSON.parse(localStorage.getItem('isAdmin'));\n\n  if (!isAdmin) {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  return children;\n};\n\nconst router = createBrowserRouter([\n  {\n    path: '/',\n    element: <Layout />,\n    errorElement: <NoPage />,\n    children: [\n      // Public Routes\n      {\n        path: '/',\n        element: <Home />,\n      },\n      {\n        path: '/register',\n        element: <Register />,\n      },\n      {\n        path: '/login',\n        element: <Login onLogin={handleLogin} />,\n      },\n      {\n        path: '/my-account',\n        element: (\n          <ProtectedRoute>\n            <MyAccount />\n          </ProtectedRoute>\n        ),\n      },\n      {\n        path: '/admin/addevent',\n        element: (\n          <ProtectedAdminRoute>\n            <AddEvent />\n          </ProtectedAdminRoute>\n        ),\n      },\n      {\n        path: '/admin/edit-event/:id',\n        element: (\n          <ProtectedAdminRoute>\n            <EditEvent />\n          </ProtectedAdminRoute>\n        ),\n      },\n      {\n        path: '/admin/my-events',\n        element: (\n          <ProtectedAdminRoute>\n            <MyEvents />\n          </ProtectedAdminRoute>\n        ),\n      },\n      // 404 route\n      {\n        path: '*',\n        element: <NoPage />,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return <RouterProvider router={router} />;\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}